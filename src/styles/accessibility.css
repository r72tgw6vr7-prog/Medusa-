/* Base focus styles for all focusable elements */
:where(
  a[href],
  button,
  input,
  select,
  textarea,
  [tabindex]:not([tabindex="-1"])
):focus-visible {
  /* Remove default focus outline */
  outline: none;
  
  /* Add custom focus ring using design tokens */
  box-shadow: 
    0 0 0 2px var(--color-background, #fff),
    0 0 0 4px var(--color-primary-600, #2563eb);
  
  /* Ensure the focus ring is visible */
  position: relative;
  z-index: 1;
}

/* Focus styles for elements with a background color */
:where(
  button,
  [role="button"],
  [type="button"],
  [type="submit"],
  [type="reset"]
):focus-visible {
  /* Slightly different style for buttons */
  box-shadow: 
    0 0 0 2px var(--color-background, #fff),
    0 0 0 4px var(--color-primary-600, #2563eb),
    0 0 0 8px rgba(37, 99, 235, 0.1);
}

/* Focus styles for inputs and textareas */
:where(
  input:not([type="radio"], [type="checkbox"]),
  textarea,
  select,
  [role="textbox"]
):focus-visible {
  box-shadow: 
    0 0 0 2px var(--color-background, #fff),
    0 0 0 4px var(--color-primary-600, #2563eb);
  border-color: var(--color-primary-600, #2563eb);
}

/* Focus styles for radio and checkbox inputs */
:where(
  [type="radio"],
  [type="checkbox"]
):focus-visible {
  box-shadow: 
    0 0 0 2px var(--color-background, #fff),
    0 0 0 4px var(--color-primary-600, #2563eb);
}

/* Focus styles for links */
a:focus-visible {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Remove focus styles for mouse users */
:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* High contrast mode support */
@media (forced-colors: active) {
  :where(
    a[href],
    button,
    input,
    select,
    textarea,
    [tabindex]:not([tabindex="-1"])
  ):focus-visible {
    outline: 2px solid transparent;
    outline-offset: 2px;
    box-shadow: 0 0 0 2px Highlight, 0 0 0 4px Canvas;
  }
}

/* Print styles */
@media print {
  :where(
    a[href],
    button,
    input,
    select,
    textarea,
    [tabindex]:not([tabindex="-1"])
  ):focus-visible {
    color: #000 !important;
    background: #fff !important;
    box-shadow: none !important;
    text-decoration: underline !important;
  }
}
